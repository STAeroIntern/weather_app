<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>NEA Weather Report</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f8f9fa; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        h1, h2 { text-align: center; margin-top: 20px; }
        .station-link { cursor: pointer; color: #0d6efd; text-decoration: underline; }
        .station-link:hover { color: #0a58ca; }
        .form-container { max-width: 500px; margin: 20px auto; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    </style>
</head>
<body>

<h1>NEA Weather Report</h1>
<h2>Automated Weather Stations</h2>

<div class="table-responsive">
    <table class="table table-bordered table-hover">
        <thead>
            <tr><th>Station ID</th><th>Location</th></tr>
        </thead>
        <tbody>
            {% for station, location in [
                ('S24','Upper Changi Road North'),('S43','Kim Chuan Road'),('S44','Nanyang Avenue'),
                ('S50','Clementi Road'),('S60','Sentosa'),('S100','Woodlands Road'),
                ('S104','Woodlands Avenue 9'),('S106','Pulau Ubin'),('S107','East Coast Parkway'),
                ('S108','Marina Gardens Drive'),('S109','Ang Mo Kio Avenue 5'),('S111','Scotts Road'),
                ('S115','Tuas South Avenue 5'),('S116','West Coast Highway'),('S117','Banyan Road'),
                ('S121','Old Choa Chu Kang Road'),('S122','Sembawang Road')
            ] %}
            <tr>
                <td><a class="station-link" href="#" onclick="setStation('{{ station }}')">{{ station }}</a></td>
                <td>{{ location }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="form-container">
    <form method="POST" id="filterForm">
        <input type="hidden" name="station" id="station" value="{{ station_id }}">
        <div class="mb-3">
            <label for="user_input" class="form-label">Date (YYYY-MM-DD):</label>
            <input type="text" name="user_input" id="user_input" class="form-control" value="{{ user_date or '' }}" required>
        </div>
        <div class="mb-3">
            <label class="form-label">Time Range (HH:MM)</label>
            <div class="d-flex gap-2">
                <input type="time" name="start_time" class="form-control" value="{{ start_time or '00:00' }}">
                <input type="time" name="end_time" class="form-control" value="{{ end_time or '23:59' }}">
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Fetch Weather Data</button>
    </form>
</div>

{% if table_html %}
<div class="table-responsive">
    <h2 class="text-center mt-4">Weather Data for Station {{ station_id }}</h2>
    {{ table_html|safe }}
</div>
{% endif %}

<script>
    function setStation(stationId) {
        document.getElementById('station').value = stationId;
        document.getElementById('filterForm').submit();
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
